@model BussinessObjects.Models.Event

@{
    Layout = null;
    ViewData["Title"] = "Event Details";
    ViewData["_Layout"] = null;
}

<div class="modal-header bg-primary text-white">
    <h5 class="modal-title fw-bold">📅 Event Details</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
</div>

<div class="modal-body">
    <h5 class="text-secondary">Event Information</h5>
    <hr />

    <dl class="row">
        <dt class="col-sm-3 fw-bold">Title:</dt>
        <dd class="col-sm-9">@Model.EventTitle</dd>

        <dt class="col-sm-3 fw-bold">Description:</dt>
        <dd class="col-sm-9">@Model.EventDescription</dd>

        <dt class="col-sm-3 fw-bold">Date:</dt>
        <dd class="col-sm-9">
            @(Model.EventDate != DateTime.MinValue ? Model.EventDate.ToString("yyyy-MM-dd HH:mm") : "<span class='text-danger fw-bold'>N/A</span>")
        </dd>

        <dt class="col-sm-3 fw-bold">Created At:</dt>
        <dd class="col-sm-9">
            @(Model.CreatedAt != DateTime.MinValue ? Model.CreatedAt.Value.ToString("yyyy-MM-dd HH:mm") : "<span class='text-danger fw-bold'>N/A</span>")
        </dd>

        <dt class="col-sm-3 fw-bold">Creator:</dt>
        <dd class="col-sm-9">
            @(Model.CreatedByNavigation?.User?.Username ?? "<span class='text-danger fw-bold'>Unknown</span>")
        </dd>
    </dl>

    <h5 class="text-secondary mt-4">📌 Tasks</h5>
    <hr />

    @if (Model.Tasks != null && Model.Tasks.Any())
    {
        <ul class="list-group">
            @foreach (var item in Model.Tasks)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <a asp-action="Details" asp-controller="ClubTasks" asp-route-id="@item.TaskId">
                        <div>
                            <p class="mb-1 fw-bold">@item.TaskDescription</p>
                            <small class="text-muted">Due: @(item.DueDate?.ToString("yyyy-MM-dd HH:mm") ?? "N/A")</small>
                        </div>
                        <span class="badge bg-primary">Task</span>
                    </a>
                    <a asp-action="Delete" asp-route-id="" class="btn btn-danger d-flex align-items-center">
                        <i class="bi bi-trash3 me-1"></i> Delete
                    </a>
                </li>
            }
        </ul>
    }
    else
    {
        <p class="text-muted text-center">No tasks assigned for this event.</p>
    }
</div>



<div class="modal-footer">
    <button type="button" class="btn btn-warning"
            onclick="loadEditModal(@Model.EventId)">
        <i class="fas fa-edit"></i> Edit
    </button>
    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
        <i class="fas fa-times"></i> Close
    </button>
</div>
